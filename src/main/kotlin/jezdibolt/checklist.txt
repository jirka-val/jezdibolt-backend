âœ… Checklist co se musÃ­ udÄ›lat

1. UÅ¾ivatelskÃ© ÃºÄty a role

    V tabulce users uÅ¾ mÃ¡Å¡ role â†’ teÄ musÃ­me definovat: âœ…

    owner â†’ vlastnÃ­k (vidÃ­ vÅ¡echno, spravuje ÃºÄty, auta, bonusy/pokuty, nÃ¡jmy, pÅ™ehledy). âœ…
    admin -> mÅ¯Å¾e spravovat auta, bonusy/pokuty, nÃ¡jmy, pÅ™ehledy (ale ne uÅ¾ivatele). âœ…
    driver â†’ Å™idiÄ (vidÃ­ jen svÃ© vÃ½platy, bonusy/pokuty, dluhy). âœ…
    renter -> nÃ¡jemce (vidÃ­ jen auta, kterÃ¡ mÃ¡ pÅ¯jÄenÃ¡, a kolik dluÅ¾Ã­). âœ…

    pÅ™Ã­padnÄ› pozdÄ›ji manager nebo nÄ›co mezi.


2. PÅ™ihlaÅ¡ovÃ¡nÃ­ (login)

    PÅ™idat password_hash sloupec do tabulky users.  âœ…
    VytvoÅ™it endpoint POST /login â†’ pÅ™ijme email + password.    âœ…
    Heslo se ovÄ›Å™Ã­ pÅ™es BCrypt. âœ…
    Po pÅ™ihlÃ¡Å¡enÃ­ vydÃ¡me JWT token. âœ…


3. Autorizace (prÃ¡va pÅ™Ã­stupu)

    Middleware/Plugin, kterÃ½ kontroluje JWT.
    Do JWT uloÅ¾Ã­me userId a role.
    Endpointy rozdÄ›lÃ­me:
    owner â†’ mÅ¯Å¾e na vÅ¡echna API (vidÃ­ vÅ¡echny vÃ½dÄ›lky, spravuje auta, bonusy/pokuty, Å™idiÄe).
    admin â†’ mÅ¯Å¾e na vÅ¡echna API kromÄ› sprÃ¡vy uÅ¾ivatelÅ¯ (vidÃ­ vÅ¡echny vÃ½dÄ›lky, spravuje auta, bonusy/pokuty, Å™idiÄe).
    driver â†’ mÅ¯Å¾e jen GET /me/earnings (vidÃ­ svoje vÃ½dÄ›lky).
    renter â†’ mÅ¯Å¾e jen GET /me/cars (vidÃ­ svoje pÅ¯jÄenÃ© auta a dluhy).

4. SprÃ¡va uÅ¾ivatelÅ¯

    Jen owner mÅ¯Å¾e pÅ™idÃ¡vat novÃ© ÃºÄty.

    Endpointy:

    POST /users â†’ pÅ™idÃ¡nÃ­ uÅ¾ivatele (owner only).

    GET /users â†’ seznam uÅ¾ivatelÅ¯ (owner only).

    PUT /users/{id} â†’ Ãºprava uÅ¾ivatele (owner only).

    DELETE /users/{id} â†’ smazÃ¡nÃ­ uÅ¾ivatele (owner only).




5. Sekce ve webu

    VÃ½platy (earnings) â€“ to uÅ¾ mÃ¡me.

    Å˜idiÄi na nÃ¡jem â€“ tabulka: Å™idiÄ â†” auto, ÄÃ¡stka nÃ¡jmu, kolik dluÅ¾Ã­.

    Auta â€“ evidence vÅ¡ech aut (SPZ, datum STK, pojiÅ¡tÄ›nÃ­, servis, kdo ho mÃ¡ pÅ¯jÄenÃ©).




6. Role-based frontend

    Owner â†’ vidÃ­ dashboard vÅ¡ech Å™idiÄÅ¯, auta, nÃ¡jmy, bonusy/pokuty, platby.

    Driver â†’ vidÃ­ jen:

    svÅ¯j profil,

    svÃ© tÃ½dennÃ­ vÃ½platy,

    proÄ dostal tolik (bonusy, pokuty, hotovost),

    jestli je vyplacenÃ½ nebo dluÅ¾Ã­.




ğŸ’¡ Co jeÅ¡tÄ› promyslet

    Registrace: bude jen pÅ™es ownera (Å¾Ã¡dnÃ½ public signup).

    BezpeÄnost: hesla uklÃ¡dat jen jako hash.

    Token expiry: JWT tokeny na 1 den, refresh tokeny na dÃ©le.

    Audit log: volitelnÃ©, kdo co zmÄ›nil (bonus/pokuta).





ğŸ‘‰ Navrhuju postup:

    PÅ™idÃ¡me password_hash do DB a endpoint /login.

    Zavedeme JWT autentizaci a middleware.

    UdÄ›lÃ¡me endpoints pro sprÃ¡vu uÅ¾ivatelÅ¯ (jen pro ownera).

    AÅ¾ tohle pobÄ›Å¾Ã­, pustÃ­me se do aut a nÃ¡jmu.